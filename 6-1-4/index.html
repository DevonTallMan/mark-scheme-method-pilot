<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Mark Scheme Method¬Æ ‚Äî 6.4 Big Data, Warehousing & GDPR</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&family=Share+Tech+Mono&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --void:#0D1117; --panel:rgba(255,255,255,0.05); --panel-border:rgba(255,255,255,0.08);
    --green:#39FF14; --green-glow:rgba(57,255,20,0.4);
    --gold:#FFD700;  --gold-glow:rgba(255,215,0,0.4);
    --teal:#00D4B8;  --teal-glow:rgba(0,212,184,0.4);
    --red:#FF3B3B;   --amber:#FF9500;
    --text-primary:#E8EDF3; --text-dim:rgba(232,237,243,0.5); --text-ghost:rgba(232,237,243,0.2);
  }
  *{box-sizing:border-box;margin:0;padding:0;}
  body{font-family:'Rajdhani',sans-serif;background:var(--void);color:var(--text-primary);min-height:100vh;overflow-x:hidden;}
  body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(0,212,184,0.02) 1px,transparent 1px),linear-gradient(90deg,rgba(0,212,184,0.02) 1px,transparent 1px);background-size:40px 40px;pointer-events:none;z-index:0;}
  body::after{content:'';position:fixed;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,0.08) 2px,rgba(0,0,0,0.08) 4px);pointer-events:none;z-index:1;}

  /* TOPBAR */
  .topbar{position:fixed;top:0;left:0;right:0;height:56px;background:rgba(13,17,23,0.92);backdrop-filter:blur(20px);border-bottom:1px solid var(--panel-border);display:flex;align-items:center;justify-content:space-between;padding:0 32px;z-index:100;}
  .logo{font-family:'Orbitron',monospace;font-size:12px;font-weight:700;letter-spacing:3px;color:var(--teal);text-shadow:0 0 20px var(--teal-glow);}
  .logo span{color:var(--green);}
  .module-badge{font-family:'Share Tech Mono',monospace;font-size:10px;letter-spacing:2px;color:var(--teal);border:1px solid rgba(0,212,184,0.35);border-radius:4px;padding:3px 10px;background:rgba(0,212,184,0.07);}
  .step-dots{display:flex;gap:8px;}
  .step-dot{width:8px;height:8px;border-radius:50%;border:1px solid var(--text-ghost);background:transparent;transition:all 0.3s;}
  .step-dot.done{background:var(--teal);border-color:var(--teal);box-shadow:0 0 8px var(--teal-glow);}
  .step-dot.active{background:var(--green);border-color:var(--green);box-shadow:0 0 8px var(--green-glow);animation:pulse-dot 1.5s ease-in-out infinite;}
  @keyframes pulse-dot{0%,100%{transform:scale(1);}50%{transform:scale(1.3);}}

  /* CORE */
  .scene{display:none;min-height:100vh;padding:80px 24px 40px;position:relative;z-index:2;animation:scene-in 0.6s ease-out;}
  .scene.active{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;}
  @keyframes scene-in{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
  @keyframes fade-in{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
  .glass{background:var(--panel);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid var(--panel-border);border-radius:16px;}
  .scene-label{font-family:'Share Tech Mono',monospace;font-size:10px;letter-spacing:4px;color:var(--teal);display:block;margin-bottom:10px;}
  .scene-headline{font-family:'Orbitron',monospace;font-size:clamp(20px,3.5vw,30px);font-weight:900;color:var(--text-primary);margin-bottom:28px;}
  .btn-primary{font-family:'Orbitron',monospace;font-size:11px;font-weight:700;letter-spacing:3px;padding:14px 28px;background:rgba(0,212,184,0.1);border:1px solid var(--teal);color:var(--teal);border-radius:6px;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all 0.2s;}
  .btn-primary:hover{background:rgba(0,212,184,0.2);box-shadow:0 0 20px var(--teal-glow);}
  .btn-primary span{pointer-events:none;}
  .btn-ghost{font-family:'Share Tech Mono',monospace;font-size:10px;letter-spacing:2px;padding:10px 20px;background:transparent;border:1px solid var(--panel-border);color:var(--text-dim);border-radius:4px;cursor:pointer;transition:all 0.2s;}
  .btn-ghost:hover{border-color:var(--text-dim);color:var(--text-primary);}
  .btn-row{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:28px;}

  /* SCENE 1 */
  .briefing-container{max-width:900px;width:100%;margin-top:20px;}
  .mission-tag{font-family:'Share Tech Mono',monospace;font-size:11px;letter-spacing:4px;color:var(--teal);margin-bottom:12px;display:block;animation:fade-in 0.8s ease 0.2s both;}
  .mission-title{font-family:'Orbitron',monospace;font-size:clamp(26px,5vw,46px);font-weight:900;line-height:1.1;color:var(--text-primary);text-align:center;margin-bottom:40px;animation:fade-in 0.8s ease 0.4s both;}
  .mission-title .tc{color:var(--teal);text-shadow:0 0 30px var(--teal-glow);}
  .mission-title .gn{color:var(--green);text-shadow:0 0 30px var(--green-glow);}
  .avatar-briefing{display:grid;grid-template-columns:220px 1fr;gap:32px;align-items:center;animation:fade-in 0.8s ease 0.6s both;}
  @media(max-width:700px){.avatar-briefing{grid-template-columns:1fr;}}
  .avatar-card{padding:24px;text-align:center;position:relative;overflow:hidden;}
  .avatar-card::before{content:'';position:absolute;inset:0;background:radial-gradient(circle at 50% 30%,rgba(0,212,184,0.08),transparent 70%);}
  .avatar-figure{width:120px;height:120px;margin:0 auto 16px;border-radius:50%;border:2px solid var(--teal);box-shadow:0 0 30px var(--teal-glow),inset 0 0 30px rgba(0,212,184,0.1);display:flex;align-items:center;justify-content:center;font-size:60px;background:radial-gradient(circle,rgba(0,212,184,0.12),transparent);animation:avatar-pulse 3s ease-in-out infinite;}
  @keyframes avatar-pulse{0%,100%{box-shadow:0 0 30px var(--teal-glow);}50%{box-shadow:0 0 60px var(--teal-glow);}}
  .avatar-name{font-family:'Orbitron',monospace;font-size:12px;font-weight:700;color:var(--teal);letter-spacing:2px;}
  .avatar-title{font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--text-dim);letter-spacing:1px;margin-top:4px;}
  .briefing-panel{padding:32px;position:relative;}
  .terminal-label{font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--teal);letter-spacing:2px;margin-bottom:20px;display:flex;align-items:center;gap:8px;}
  .terminal-label::before{content:'';width:6px;height:6px;border-radius:50%;background:var(--teal);box-shadow:0 0 10px var(--teal-glow);animation:blink 1s step-end infinite;}
  @keyframes blink{0%,100%{opacity:1;}50%{opacity:0;}}
  .briefing-text{font-family:'Share Tech Mono',monospace;font-size:14px;line-height:1.8;color:var(--text-primary);}
  .briefing-text .hl-g{color:var(--green);}
  .briefing-text .hl-tc{color:var(--teal);}
  .briefing-text .hl-r{color:var(--red);}
  .nei-trio{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-top:28px;}
  @media(max-width:600px){.nei-trio{grid-template-columns:1fr;}}
  .nei-card{padding:16px;border-radius:12px;text-align:center;}
  .nei-letter{font-family:'Orbitron',monospace;font-size:28px;font-weight:900;margin-bottom:6px;}
  .nei-label{font-family:'Share Tech Mono',monospace;font-size:10px;letter-spacing:2px;margin-bottom:8px;opacity:0.7;}
  .nei-desc{font-size:13px;color:var(--text-dim);line-height:1.4;}
  .n-card{border:1px solid rgba(255,59,59,0.3);background:rgba(255,59,59,0.05);} .n-card .nei-letter{color:var(--red);}
  .e-card{border:1px solid rgba(255,149,0,0.3);background:rgba(255,149,0,0.05);} .e-card .nei-letter{color:var(--amber);}
  .i-card{border:1px solid rgba(57,255,20,0.3);background:rgba(57,255,20,0.05);} .i-card .nei-letter{color:var(--green);}

  /* 6 Vs grid */
  .six-vs{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:20px;}
  @media(max-width:500px){.six-vs{grid-template-columns:repeat(2,1fr);}}
  .v-card{padding:12px;border-radius:10px;text-align:center;border:1px solid rgba(0,212,184,0.2);background:rgba(0,212,184,0.04);}
  .v-letter{font-family:'Orbitron',monospace;font-size:20px;font-weight:900;color:var(--teal);}
  .v-word{font-family:'Share Tech Mono',monospace;font-size:9px;letter-spacing:2px;color:var(--text-dim);margin-top:4px;}
  .v-def{font-size:11px;color:var(--text-ghost);margin-top:4px;line-height:1.3;}

  /* SCENE 2 - MCQ */
  .mcq-container{max-width:820px;width:100%;margin-top:20px;}
  .mcq-progress{font-family:'Share Tech Mono',monospace;font-size:10px;letter-spacing:3px;color:var(--teal);margin-bottom:20px;}
  .mcq-card{padding:28px 32px;}
  .mcq-question{font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:600;line-height:1.6;margin-bottom:24px;}
  .mcq-scenario{font-family:'Share Tech Mono',monospace;font-size:12px;color:var(--teal);background:rgba(0,212,184,0.06);border:1px solid rgba(0,212,184,0.2);border-radius:8px;padding:14px 18px;margin-bottom:20px;line-height:1.7;}
  .mcq-options{display:flex;flex-direction:column;gap:10px;}
  .mcq-opt{padding:14px 18px;border-radius:10px;border:1px solid var(--panel-border);background:transparent;cursor:pointer;font-family:'Rajdhani',sans-serif;font-size:15px;font-weight:500;text-align:left;color:var(--text-primary);transition:all 0.2s;display:flex;align-items:center;gap:12px;}
  .mcq-opt:hover:not(.disabled){border-color:var(--teal);background:rgba(0,212,184,0.06);}
  .mcq-opt.selected{border-color:var(--teal);background:rgba(0,212,184,0.08);}
  .mcq-opt.correct{border-color:var(--green);background:rgba(57,255,20,0.08);color:var(--green);}
  .mcq-opt.incorrect{border-color:var(--red);background:rgba(255,59,59,0.08);color:var(--red);}
  .mcq-opt.disabled{cursor:default;}
  .opt-letter{font-family:'Orbitron',monospace;font-size:11px;font-weight:700;width:24px;height:24px;border-radius:50%;border:1px solid var(--panel-border);display:flex;align-items:center;justify-content:center;flex-shrink:0;}
  .mcq-feedback{margin-top:16px;padding:14px 18px;border-radius:10px;font-family:'Share Tech Mono',monospace;font-size:12px;line-height:1.7;display:none;}
  .mcq-feedback.show{display:block;animation:fade-in 0.4s ease both;}
  .mcq-feedback.correct{border:1px solid var(--green);background:rgba(57,255,20,0.06);color:var(--green);}
  .mcq-feedback.incorrect{border:1px solid var(--red);background:rgba(255,59,59,0.06);color:var(--red);}
  .mcq-score{font-family:'Orbitron',monospace;font-size:11px;color:var(--teal);text-align:center;margin-bottom:16px;letter-spacing:2px;}

  /* SCENE 3 */
  .mission-layout{max-width:1000px;width:100%;display:grid;grid-template-columns:1fr 220px;gap:24px;margin-top:20px;align-items:flex-start;}
  @media(max-width:750px){.mission-layout{grid-template-columns:1fr;}}
  .terminal-panel{padding:0;overflow:hidden;}
  .terminal-header{display:flex;align-items:center;gap:8px;padding:14px 20px;background:rgba(0,212,184,0.04);border-bottom:1px solid var(--panel-border);}
  .terminal-dots{display:flex;gap:6px;}
  .tdot{width:10px;height:10px;border-radius:50%;}
  .tdot.r{background:#ff5f56;} .tdot.y{background:#ffbd2e;} .tdot.t{background:var(--teal);}
  .terminal-path{font-family:'Share Tech Mono',monospace;font-size:11px;color:var(--text-dim);margin-left:8px;}
  .question-block{padding:24px;border-bottom:1px solid var(--panel-border);}
  .q-tag{font-family:'Share Tech Mono',monospace;font-size:10px;letter-spacing:3px;color:var(--teal);margin-bottom:10px;}
  .q-text{font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:600;line-height:1.6;color:var(--text-primary);}
  .q-marks{display:inline-block;font-family:'Orbitron',monospace;font-size:11px;color:var(--teal);border:1px solid rgba(0,212,184,0.4);border-radius:4px;padding:2px 8px;margin-left:8px;}
  .answer-area{padding:20px;}
  .answer-textarea{width:100%;min-height:160px;background:rgba(0,212,184,0.02);border:1px solid rgba(0,212,184,0.15);border-radius:8px;color:var(--text-primary);font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:500;line-height:1.7;padding:16px;resize:vertical;outline:none;transition:border-color 0.2s;}
  .answer-textarea:focus{border-color:var(--teal);box-shadow:0 0 0 3px rgba(0,212,184,0.06);}
  .answer-textarea::placeholder{color:var(--text-ghost);}
  .method-ribbon{padding:24px 16px;display:flex;flex-direction:column;gap:16px;position:sticky;top:80px;}
  .ribbon-title{font-family:'Orbitron',monospace;font-size:11px;font-weight:700;letter-spacing:3px;color:var(--text-dim);text-align:center;}
  .nei-hud-item{padding:16px 12px;border-radius:10px;text-align:center;border:1px solid;transition:all 0.4s;opacity:0.35;}
  .nei-hud-item.active-n{opacity:1;border-color:rgba(255,59,59,0.5);background:rgba(255,59,59,0.08);}
  .nei-hud-item.active-e{opacity:1;border-color:rgba(255,149,0,0.5);background:rgba(255,149,0,0.08);}
  .nei-hud-item.active-i{opacity:1;border-color:rgba(57,255,20,0.5);background:rgba(57,255,20,0.08);}
  .hud-letter{font-family:'Orbitron',monospace;font-size:24px;font-weight:900;display:block;margin-bottom:4px;}
  .hud-n{border-color:rgba(255,59,59,0.2);} .hud-n .hud-letter{color:var(--red);}
  .hud-e{border-color:rgba(255,149,0,0.2);} .hud-e .hud-letter{color:var(--amber);}
  .hud-i{border-color:rgba(57,255,20,0.2);} .hud-i .hud-letter{color:var(--green);}
  .hud-label{font-family:'Share Tech Mono',monospace;font-size:10px;letter-spacing:2px;color:var(--text-dim);margin-bottom:6px;}
  .hud-hint{font-size:12px;color:var(--text-dim);line-height:1.4;}
  @keyframes hud-glitch{0%{filter:invert(0) brightness(1)}20%{filter:invert(1) brightness(2)}40%{filter:invert(0) brightness(1)}60%{filter:invert(1) brightness(2)}80%{filter:invert(0) brightness(1)}100%{filter:invert(0) brightness(1)}}
  @keyframes impact-pulse{0%,100%{box-shadow:0 0 0 rgba(57,255,20,0)}50%{box-shadow:0 0 14px rgba(57,255,20,0.5)}}
  .energy-bar-wrap{display:flex;align-items:center;gap:10px;margin-top:10px;}
  .energy-bar-track{flex:1;height:8px;background:rgba(255,255,255,0.06);border-radius:4px;overflow:hidden;border:1px solid rgba(255,255,255,0.08);}
  .energy-bar-fill{height:100%;width:0%;border-radius:4px;transition:width 0.3s ease,background 0.4s ease;}
  .energy-bar-fill.eb-red{background:var(--red);}
  .energy-bar-fill.eb-amber{background:var(--amber);animation:bar-pulse 1.2s ease infinite;}
  .energy-bar-fill.eb-green{background:var(--green);animation:bar-flash 0.6s ease forwards;}
  @keyframes bar-pulse{0%,100%{opacity:1}50%{opacity:0.55}}
  @keyframes bar-flash{0%{box-shadow:none}50%{box-shadow:0 0 18px rgba(57,255,20,0.7)}100%{box-shadow:0 0 10px rgba(57,255,20,0.4)}}
  .energy-bar-label{font-family:'Share Tech Mono',monospace;font-size:11px;min-width:160px;transition:color 0.4s;}

  /* SCENE 4 */
  .calibration-layout{max-width:960px;width:100%;margin-top:20px;display:grid;grid-template-columns:1fr 280px;gap:24px;align-items:flex-start;}
  @media(max-width:800px){.calibration-layout{grid-template-columns:1fr;}}
  .cal-main{display:flex;flex-direction:column;gap:20px;}
  .model-answer-panel{padding:24px;}
  .ma-title{font-family:'Share Tech Mono',monospace;font-size:11px;letter-spacing:3px;color:var(--teal);margin-bottom:16px;}
  .ma-text{font-size:15px;line-height:1.8;font-weight:500;}
  .ma-n{background:rgba(255,59,59,0.25);color:#ffaaaa;border-radius:3px;padding:1px 4px;}
  .ma-e{background:rgba(255,149,0,0.25);color:#ffcc88;border-radius:3px;padding:1px 4px;}
  .ma-i{background:rgba(57,255,20,0.2);color:#aaff88;border-radius:3px;padding:1px 4px;}
  .ma-legend{display:flex;gap:16px;margin-top:16px;flex-wrap:wrap;}
  .legend-item{display:flex;align-items:center;gap:6px;font-family:'Share Tech Mono',monospace;font-size:11px;}
  .legend-dot{width:10px;height:10px;border-radius:2px;}
  .highlight-toolbar{padding:20px;position:sticky;top:80px;}
  .toolbar-title{font-family:'Orbitron',monospace;font-size:11px;letter-spacing:2px;color:var(--text-dim);margin-bottom:20px;text-align:center;}
  .hl-btn{width:100%;padding:14px 16px;border-radius:10px;border:1px solid;background:transparent;cursor:pointer;font-family:'Orbitron',monospace;font-size:12px;font-weight:700;letter-spacing:2px;display:flex;align-items:center;gap:10px;transition:all 0.2s;margin-bottom:10px;}
  .hl-btn.active{transform:translateX(4px);}
  .hl-n{border-color:rgba(255,59,59,0.4);color:var(--red);} .hl-n:hover,.hl-n.active{background:rgba(255,59,59,0.15);border-color:var(--red);}
  .hl-e{border-color:rgba(255,149,0,0.4);color:var(--amber);} .hl-e:hover,.hl-e.active{background:rgba(255,149,0,0.15);border-color:var(--amber);}
  .hl-i{border-color:rgba(57,255,20,0.4);color:var(--green);} .hl-i:hover,.hl-i.active{background:rgba(57,255,20,0.15);border-color:var(--green);}
  .hl-instructions{font-family:'Share Tech Mono',monospace;font-size:11px;color:var(--text-dim);line-height:1.6;margin-top:16px;padding-top:16px;border-top:1px solid var(--panel-border);}
  .student-answer-area{padding:24px;}
  .sa-title{font-family:'Share Tech Mono',monospace;font-size:11px;letter-spacing:3px;color:var(--text-dim);margin-bottom:16px;}
  #student-display{font-size:16px;line-height:1.9;font-weight:500;cursor:text;min-height:80px;}
  #student-display .hl-n-tag{background:rgba(255,59,59,0.3);color:#ffcccc;border-radius:3px;padding:0 3px;}
  #student-display .hl-e-tag{background:rgba(255,149,0,0.3);color:#ffe0aa;border-radius:3px;padding:0 3px;}
  #student-display .hl-i-tag{background:rgba(57,255,20,0.25);color:#bbffaa;border-radius:3px;padding:0 3px;}
  .vulnerability-alert{display:none;padding:20px 24px;border:1px solid var(--red);background:rgba(255,59,59,0.08);border-radius:12px;}
  .vulnerability-alert.show{display:block;animation:vuln-in 0.5s ease both;}
  @keyframes vuln-in{from{transform:scale(0.95);opacity:0;}to{transform:scale(1);opacity:1;}}
  .vuln-header{display:flex;align-items:center;gap:10px;font-family:'Orbitron',monospace;font-size:13px;font-weight:700;color:var(--red);margin-bottom:12px;}
  .vuln-icon{width:32px;height:32px;border-radius:50%;background:rgba(255,59,59,0.2);border:1px solid var(--red);display:flex;align-items:center;justify-content:center;font-size:16px;animation:pulse-red 1s ease-in-out infinite;}
  @keyframes pulse-red{0%,100%{box-shadow:0 0 0 0 rgba(255,59,59,0.4);}50%{box-shadow:0 0 0 8px rgba(255,59,59,0);}}
  .vuln-msg{font-family:'Share Tech Mono',monospace;font-size:13px;color:var(--text-primary);line-height:1.7;}
  .vuln-msg strong{color:var(--red);}
  .success-alert{display:none;padding:20px 24px;border:1px solid var(--green);background:rgba(57,255,20,0.07);border-radius:12px;}
  .success-alert.show{display:block;animation:fade-in 0.5s ease both;}
  .success-header{display:flex;align-items:center;gap:10px;font-family:'Orbitron',monospace;font-size:13px;font-weight:700;color:var(--green);margin-bottom:12px;}
  .nei-tally{display:flex;gap:12px;margin-top:12px;flex-wrap:wrap;}
  .tally-chip{font-family:'Share Tech Mono',monospace;font-size:12px;padding:6px 14px;border-radius:20px;border:1px solid;}
  .tally-n{border-color:var(--red);background:rgba(255,59,59,0.1);color:#ff8888;}
  .tally-e{border-color:var(--amber);background:rgba(255,149,0,0.1);color:#ffcc88;}
  .tally-i{border-color:var(--green);background:rgba(57,255,20,0.1);color:#aaff88;}

  /* SCENE 5 */
  .success-scene{max-width:700px;width:100%;margin-top:20px;display:flex;flex-direction:column;align-items:center;gap:32px;}
  .badge-3d{width:200px;height:200px;border-radius:50%;background:conic-gradient(var(--teal),var(--green),var(--gold),var(--teal),var(--green),var(--teal));display:flex;align-items:center;justify-content:center;animation:badge-spin 8s linear infinite,badge-float 3s ease-in-out infinite;box-shadow:0 0 60px var(--teal-glow),0 0 120px rgba(57,255,20,0.2);cursor:pointer;margin:0 auto;}
  @keyframes badge-spin{from{filter:hue-rotate(0deg);}to{filter:hue-rotate(360deg);}}
  @keyframes badge-float{0%,100%{transform:translateY(0);}50%{transform:translateY(-12px);}}
  .badge-inner{width:170px;height:170px;border-radius:50%;background:radial-gradient(circle,#1a2030,var(--void));display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:20px;}
  .badge-icon{font-size:48px;margin-bottom:8px;}
  .badge-rank{font-family:'Orbitron',monospace;font-size:8px;letter-spacing:2px;color:var(--teal);font-weight:700;}
  .badge-name{font-family:'Orbitron',monospace;font-size:10px;font-weight:900;color:var(--text-primary);letter-spacing:1px;line-height:1.3;}
  .success-card{padding:32px;text-align:center;width:100%;}
  .success-headline{font-family:'Orbitron',monospace;font-size:clamp(20px,4vw,32px);font-weight:900;color:var(--teal);text-shadow:0 0 30px var(--teal-glow);margin-bottom:12px;}
  .success-sub{font-size:16px;color:var(--text-dim);margin-bottom:28px;}
  .share-card{padding:20px 24px;border-radius:12px;background:linear-gradient(135deg,rgba(0,212,184,0.08),rgba(57,255,20,0.05));border:1px solid rgba(0,212,184,0.25);font-family:'Share Tech Mono',monospace;font-size:14px;color:var(--teal);margin-bottom:28px;line-height:1.7;}
  .mission-report-btn{font-family:'Orbitron',monospace;font-size:11px;letter-spacing:2px;padding:12px 28px;background:rgba(0,212,184,0.1);border:1px solid var(--teal);color:var(--teal);border-radius:4px;cursor:pointer;display:flex;align-items:center;gap:8px;transition:all 0.2s;margin:0 auto;}
  .mission-report-btn:hover{background:rgba(0,212,184,0.2);}
  /* COMPLETION BANNER */
  .completion-banner{padding:24px 28px;border-radius:14px;background:linear-gradient(135deg,rgba(255,215,0,0.08),rgba(57,255,20,0.06));border:1px solid rgba(255,215,0,0.3);text-align:center;margin-top:8px;}
  .cb-title{font-family:'Orbitron',monospace;font-size:14px;font-weight:900;color:var(--gold);letter-spacing:3px;margin-bottom:10px;}
  .cb-sub{font-family:'Share Tech Mono',monospace;font-size:12px;color:var(--text-dim);line-height:1.7;}

  /* AXIOM */
  #axiom-deconstruction{display:none;margin-top:20px;}
  .axd-header{display:flex;align-items:center;gap:10px;margin-bottom:14px;}
  .axd-title{font-family:'Orbitron',monospace;font-size:12px;font-weight:700;color:var(--green);letter-spacing:3px;}
  .axd-sub{font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--text-dim);letter-spacing:1px;}
  .axd-badges{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:14px;}
  .axd-badge{font-family:'Share Tech Mono',monospace;font-size:11px;padding:6px 12px;border-radius:4px;border:1px solid;letter-spacing:1px;}
  .axd-badge.hit{color:var(--green);border-color:rgba(57,255,20,0.35);background:rgba(57,255,20,0.06);} .axd-badge.hit::before{content:'‚úì  ';}
  .axd-badge.miss{color:var(--text-dim);border-color:rgba(255,255,255,0.1);background:transparent;} .axd-badge.miss::before{content:'‚óã  ';}
  .axd-text-wrap{background:rgba(255,255,255,0.03);border:1px solid var(--panel-border);border-radius:8px;padding:16px 18px;font-family:'Rajdhani',sans-serif;font-size:15px;font-weight:500;line-height:1.8;}
  .axd-text-wrap .nei-n{background:rgba(255,59,59,0.25);color:#ffcccc;border-radius:3px;padding:1px 4px;}
  .axd-text-wrap .nei-e{background:rgba(255,149,0,0.25);color:#ffe0aa;border-radius:3px;padding:1px 4px;}
  .axd-text-wrap .nei-i{background:rgba(57,255,20,0.2);color:#bbffaa;border-radius:3px;padding:1px 4px;}
  .axd-legend{display:flex;gap:16px;flex-wrap:wrap;margin-top:12px;}
  .axd-legend-item{font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--text-dim);display:flex;align-items:center;gap:6px;}
  .axd-dot{width:10px;height:10px;border-radius:2px;display:inline-block;}
  .axd-loading{font-family:'Share Tech Mono',monospace;font-size:11px;color:var(--text-dim);letter-spacing:2px;padding:16px 0;display:flex;align-items:center;gap:10px;}
  .axd-spinner{width:14px;height:14px;border:2px solid rgba(57,255,20,0.2);border-top-color:var(--green);border-radius:50%;animation:spin-axd 0.8s linear infinite;}
  @keyframes spin-axd{to{transform:rotate(360deg);}}
  .axd-error{font-family:'Share Tech Mono',monospace;font-size:11px;color:var(--amber);letter-spacing:1px;padding:12px 0;}

  /* NAV + GLITCH */
  .nav-tabs{display:flex;gap:8px;position:fixed;bottom:24px;right:24px;z-index:50;flex-direction:column;align-items:flex-end;}
  .nav-tab-btn{font-family:'Share Tech Mono',monospace;font-size:10px;letter-spacing:1px;padding:8px 16px;background:rgba(13,17,23,0.9);backdrop-filter:blur(10px);border:1px solid var(--panel-border);color:var(--text-dim);border-radius:4px;cursor:pointer;transition:all 0.2s;}
  .nav-tab-btn.active{border-color:var(--teal);color:var(--teal);}
  .nav-tab-btn:hover:not(:disabled){border-color:var(--text-dim);color:var(--text-primary);}
  .nav-tab-btn.locked{border-color:rgba(255,59,59,0.2);color:rgba(232,237,243,0.2);cursor:not-allowed;}
  .nav-tab-btn.locked:hover{border-color:rgba(255,59,59,0.4);color:rgba(255,59,59,0.5);}
  @keyframes tab-reject{0%,100%{transform:translateX(0);}20%{transform:translateX(-5px);}40%{transform:translateX(5px);}60%{transform:translateX(-3px);}80%{transform:translateX(3px);}}
  .nav-tab-btn.rejecting{animation:tab-reject 0.35s ease;}
  #lock-nudge{position:fixed;bottom:28px;right:180px;background:rgba(255,59,59,0.12);border:1px solid rgba(255,59,59,0.4);border-radius:6px;padding:8px 14px;font-family:'Share Tech Mono',monospace;font-size:11px;color:var(--red);letter-spacing:1px;white-space:nowrap;z-index:200;opacity:0;transform:translateX(8px);transition:opacity 0.2s,transform 0.2s;pointer-events:none;}
  #lock-nudge.show{opacity:1;transform:translateX(0);}
  #glitch-overlay{position:fixed;inset:0;background:var(--void);z-index:999;display:flex;flex-direction:column;align-items:center;justify-content:center;pointer-events:none;opacity:0;visibility:hidden;}
  #glitch-overlay.active{visibility:visible;animation:glitch-sequence 1.9s ease-in-out forwards;}
  @keyframes glitch-sequence{0%{opacity:0;}5%{opacity:1;}10%{opacity:0.6;}15%{opacity:1;}85%{opacity:1;}100%{opacity:0;visibility:hidden;}}
  .glitch-scanlines{position:absolute;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(0,212,184,0.03) 3px,rgba(0,212,184,0.03) 4px);pointer-events:none;}
  .glitch-block{position:absolute;width:100%;height:3px;opacity:0;}
  .g1{background:var(--teal);top:28%;animation:gbar1 1.9s ease forwards 0.1s;}
  .g2{background:var(--green);top:50%;height:2px;animation:gbar2 1.9s ease forwards 0.25s;}
  .g3{background:var(--amber);top:70%;animation:gbar3 1.9s ease forwards 0.15s;}
  @keyframes gbar1{0%,100%{opacity:0}10%{opacity:1;transform:translateX(-8%)}14%{opacity:0;transform:translateX(12%)}22%{opacity:1;transform:translateX(-4%)}30%{opacity:0}42%{opacity:0.6}55%{opacity:0}}
  @keyframes gbar2{0%,100%{opacity:0}18%{opacity:1;transform:translateX(10%) scaleX(0.6)}25%{opacity:0}36%{opacity:0.8;transform:translateX(-5%) scaleX(1.2)}43%{opacity:0}}
  @keyframes gbar3{0%,100%{opacity:0}16%{opacity:1;transform:translateX(6%)}21%{opacity:0;transform:translateX(-10%)}31%{opacity:0.5}40%{opacity:0}}
  .glitch-text{font-family:'Orbitron',monospace;font-size:clamp(18px,4vw,32px);font-weight:900;color:var(--teal);letter-spacing:6px;text-align:center;animation:gtext 1.9s ease-in-out forwards;}
  @keyframes gtext{0%{opacity:0;transform:translateY(8px)}10%{opacity:1;transform:translateY(0)}55%{opacity:1;letter-spacing:8px}88%{opacity:0;letter-spacing:12px}100%{opacity:0}}
  .glitch-subtext{font-family:'Share Tech Mono',monospace;font-size:13px;letter-spacing:5px;color:var(--green);margin-top:20px;text-align:center;animation:gsub 1.9s ease-in-out forwards;}
  .glitch-coords{font-family:'Share Tech Mono',monospace;font-size:11px;letter-spacing:3px;color:rgba(0,212,184,0.5);margin-top:12px;text-align:center;animation:gcoords 1.9s ease-in-out forwards;}
  @keyframes gsub{0%,12%{opacity:0}25%{opacity:1}65%{opacity:1}85%{opacity:0}100%{opacity:0}}
  @keyframes gcoords{0%,30%{opacity:0}45%{opacity:1}70%{opacity:0.6}85%{opacity:0}100%{opacity:0}}
  #reboot-overlay{display:none;position:fixed;inset:0;z-index:9999;background:#0D1117;flex-direction:column;align-items:center;justify-content:center;font-family:'Orbitron',monospace;}
  #reboot-overlay .rb-line1{font-size:clamp(11px,2vw,14px);color:var(--teal);letter-spacing:4px;opacity:0;transition:opacity 0.3s;text-align:center;padding:0 20px;}
  #reboot-overlay .rb-line2{font-size:clamp(16px,3.5vw,30px);font-weight:900;color:var(--green);letter-spacing:5px;margin-top:16px;opacity:0;transition:opacity 0.4s;text-align:center;padding:0 20px;}
  #reboot-overlay .rb-bar-wrap{max-width:400px;width:90%;margin-top:32px;}
  #reboot-overlay .rb-bar{height:3px;width:0%;background:var(--teal);box-shadow:0 0 12px var(--teal-glow);transition:none;}
  ::-webkit-scrollbar{width:4px} ::-webkit-scrollbar-track{background:var(--void)} ::-webkit-scrollbar-thumb{background:rgba(0,212,184,0.3);border-radius:2px}
</style>
</head>
<body>

<nav class="topbar">
  <div class="logo">MARK SCHEME <span>METHOD</span>¬Æ</div>
  <div class="step-dots">
    <div class="step-dot active" id="dot-1"></div>
    <div class="step-dot" id="dot-2"></div>
    <div class="step-dot" id="dot-3"></div>
    <div class="step-dot" id="dot-4"></div>
    <div class="step-dot" id="dot-5"></div>
  </div>
  <div style="display:flex;align-items:center;gap:12px;">
    <a href="../topics.html" style="font-family:'Share Tech Mono',monospace;font-size:10px;letter-spacing:2px;color:rgba(232,237,243,0.4);text-decoration:none;border:1px solid rgba(255,255,255,0.08);border-radius:4px;padding:5px 12px;transition:all 0.2s;" onmouseover="this.style.borderColor='rgba(0,212,184,0.4)';this.style.color='#00D4B8'" onmouseout="this.style.borderColor='rgba(255,255,255,0.08)';this.style.color='rgba(232,237,243,0.4)'">‚Üê TOPICS</a>
    <div class="module-badge">MODULE 6.4</div>
  </div>
</nav>

<!-- SCENE 1: BRIEFING -->
<section class="scene active" id="scene-1">
  <div class="briefing-container">
    <div style="text-align:center;margin-bottom:40px;">
      <span class="mission-tag">CONTENT AREA 6 // DATA IN ORGANISATIONS // 6.4</span>
      <h1 class="mission-title">BIG DATA<br><span class="tc">WAREHOUSING</span> &amp; <span class="gn">GDPR</span></h1>
    </div>
    <div class="avatar-briefing">
      <div class="glass avatar-card">
        <div class="avatar-figure">ü§ñ</div>
        <div class="avatar-name">AXIOM-7</div>
        <div class="avatar-title">// DATA ARCHITECT //</div>
        <br>
        <div style="display:flex;flex-direction:column;gap:6px;text-align:left;">
          <div style="font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--text-dim);">‚ñ∏ CLEARANCE: SPECIALIST</div>
          <div style="font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--text-dim);">‚ñ∏ MODULE: 6.4</div>
          <div style="font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--teal);">‚ñ∏ COMPLIANCE ALERT: ACTIVE</div>
        </div>
      </div>
      <div class="glass briefing-panel">
        <div class="terminal-label">OPERATIONAL BRIEFING // AXIOM-7 TRANSMISSION</div>
        <div class="briefing-text">
          "Specialist. Final mission in Content Area 6 ‚Äî and it's the one that carries the <span class="hl-tc">heaviest regulatory risk</span>.<br><br>
          A global retailer processes 4 petabytes of customer behavioural data daily. Transactions, clickstreams, location pings. They store it in a <span class="hl-g">centralised data warehouse</span> and analyse it with machine learning models. But they operate across the EU. Which means GDPR.<br><br>
          Today you'll understand how <span class="hl-tc">big data characteristics</span> create both opportunity and obligation ‚Äî and why the examiner wants to know what GDPR actually does to the business, not just what it is.<br><br>
          <span class="hl-r">The examiner does not want you to recite the six Vs.</span><br>
          <span class="hl-tc">They want to know the business consequence of collecting data at this scale.</span>"
        </div>
        <div class="nei-trio">
          <div class="glass nei-card n-card"><div class="nei-letter">N</div><div class="nei-label">NAME</div><div class="nei-desc">Identify the big data concept or regulation</div></div>
          <div class="glass nei-card e-card"><div class="nei-letter">E</div><div class="nei-label">EXPLAIN</div><div class="nei-desc">Describe how it applies to the scenario</div></div>
          <div class="glass nei-card i-card"><div class="nei-letter">I</div><div class="nei-label">IMPACT</div><div class="nei-desc">State the measurable business or legal consequence</div></div>
        </div>
        <div style="margin-top:20px;">
          <div style="font-family:'Share Tech Mono',monospace;font-size:10px;letter-spacing:3px;color:var(--teal);margin-bottom:12px;">// THE SIX Vs OF BIG DATA</div>
          <div class="six-vs">
            <div class="v-card"><div class="v-letter">V</div><div class="v-word">VOLUME</div><div class="v-def">Petabytes of data generated continuously</div></div>
            <div class="v-card"><div class="v-letter">V</div><div class="v-word">VELOCITY</div><div class="v-def">Data arriving and processed in real-time</div></div>
            <div class="v-card"><div class="v-letter">V</div><div class="v-word">VARIETY</div><div class="v-def">Structured, semi-structured & unstructured</div></div>
            <div class="v-card"><div class="v-letter">V</div><div class="v-word">VERACITY</div><div class="v-def">Accuracy and trustworthiness of the data</div></div>
            <div class="v-card"><div class="v-letter">V</div><div class="v-word">VALUE</div><div class="v-def">Business insight extracted from the data</div></div>
            <div class="v-card"><div class="v-letter">V</div><div class="v-word">VARIABILITY</div><div class="v-def">Inconsistency in meaning over time</div></div>
          </div>
        </div>
      </div>
    </div>
    <div class="btn-row"><button class="btn-primary" onclick="goScene(2)"><span>‚ü∂ START MISSION</span></button></div>
  </div>
</section>

<!-- SCENE 2: MCQ -->
<section class="scene" id="scene-2">
  <div class="mcq-container">
    <span class="scene-label">SCENE 02 // COMPLIANCE CLASSIFIER // KNOWLEDGE CHECK</span>
    <h2 class="scene-headline">GDPR & Big Data ‚Äî <span style="color:var(--teal)">4 Questions</span></h2>
    <div class="mcq-score" id="mcq-score">QUESTION 1 OF 4</div>
    <div class="glass mcq-card" id="mcq-card">
      <!-- injected by JS -->
    </div>
    <div class="btn-row" style="margin-top:20px;">
      <button class="btn-ghost" onclick="goScene(1)">‚Üê BACK</button>
      <button class="btn-primary" id="mcq-next-btn" onclick="nextQuestion()" style="display:none;"><span>‚Üí NEXT QUESTION</span></button>
    </div>
  </div>
</section>

<!-- SCENE 3: MISSION TERMINAL -->
<section class="scene" id="scene-3">
  <div class="mission-layout">
    <div class="glass terminal-panel">
      <div class="terminal-header">
        <div class="terminal-dots"><div class="tdot r"></div><div class="tdot y"></div><div class="tdot t"></div></div>
        <div class="terminal-path">msm://exam/content-6.4/gdpr-data-rights-q1</div>
      </div>
      <div class="question-block">
        <div class="q-tag">// EXAM QUESTION // CONTENT AREA 6.4 // BIG DATA & GDPR</div>
        <div class="q-text">
          A global retailer stores and analyses <span style="color:var(--teal);font-family:monospace;font-size:15px;">customer behavioural data</span> collected from its e-commerce platform to personalise product recommendations. Explain one way the <span style="color:var(--teal);font-family:monospace;font-size:15px;">GDPR</span> affects how this organisation manages this data.
          <span class="q-marks">3 MARKS</span>
        </div>
      </div>
      <div class="answer-area">
        <div style="font-family:'Share Tech Mono',monospace;font-size:10px;letter-spacing:2px;color:var(--text-dim);margin-bottom:12px;">YOUR RESPONSE // USE N.E.I. STRUCTURE</div>
        <textarea class="answer-textarea" id="student-answer" maxlength="600"
          oninput="updateHUD(this.value);updateWordCount(this.value);resetIdleTimer(this.value)"
          onkeyup="updateHUD(this.value);updateWordCount(this.value);resetIdleTimer(this.value)"
          onpaste="setTimeout(()=>{const v=this.value;updateHUD(v);updateWordCount(v);resetIdleTimer(v);},10)"
          placeholder="Name a specific GDPR right or principle, explain how it applies to customer behavioural data, and state the measurable business consequence ‚Äî cost, operational change, or legal risk..."></textarea>
        <div class="energy-bar-wrap">
          <div class="energy-bar-track"><div class="energy-bar-fill" id="energy-bar-fill"></div></div>
          <div class="energy-bar-label" id="word-count-display">0 words ‚Äî aim for 60+</div>
        </div>
        <div id="axiom-feedback" style="display:none;margin-top:14px;padding:14px 18px;border-radius:8px;font-family:'Share Tech Mono',monospace;font-size:12px;line-height:1.6;border:1px solid var(--amber);background:rgba(255,149,0,0.06);color:var(--amber);animation:fade-in 0.4s ease both;"></div>
      </div>
      <div style="padding:0 20px 20px;">
        <div class="btn-row" style="margin-top:0;justify-content:flex-start;">
          <button class="btn-ghost" onclick="goScene(2)">‚Üê BACK</button>
          <button class="btn-primary" onclick="submitAnswer()"><span>‚ü∂ SUBMIT FOR CALIBRATION</span></button>
        </div>
      </div>
    </div>
    <div class="glass method-ribbon">
      <div class="ribbon-title">METHOD RIBBON</div>
      <div class="nei-hud-item hud-n" id="hud-n"><span class="hud-letter">N</span><div class="hud-label">NAME</div><div class="hud-hint">Specific GDPR right or principle</div></div>
      <div class="nei-hud-item hud-e" id="hud-e"><span class="hud-letter">E</span><div class="hud-label">EXPLAIN</div><div class="hud-hint">How it applies to behavioural data collection</div></div>
      <div class="nei-hud-item hud-i" id="hud-i"><span class="hud-letter">I</span><div class="hud-label">IMPACT</div><div class="hud-hint">Business cost, operational change, legal risk</div></div>
      <div style="padding-top:12px;border-top:1px solid var(--panel-border);font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--text-dim);line-height:1.7;">‚ñ∏ N+E = 2 marks<br>‚ñ∏ N+E+I = 3 marks<br>‚ñ∏ I alone = 0 marks</div>
    </div>
  </div>
</section>

<!-- SCENE 4: CALIBRATION -->
<section class="scene" id="scene-4">
  <div class="calibration-layout">
    <div class="cal-main">
      <div>
        <span class="scene-label">SCENE 04 // SELF-CALIBRATION // NEI DECONSTRUCTION</span>
        <h2 class="scene-headline" style="text-align:left;">Mark Your <span style="color:var(--green)">Own Work</span></h2>
      </div>
      <div class="glass model-answer-panel">
        <div class="ma-title">// MODEL ANSWER // 3 MARKS ACHIEVED</div>
        <div class="ma-text">
          <span class="ma-n">[N] <strong>The Right to Erasure</strong> (also known as the 'right to be forgotten') under GDPR gives individuals the legal right to request that an organisation deletes all personal data held about them, including behavioural and transactional data.</span>
          &nbsp;
          <span class="ma-e">[E] <strong>Mechanism:</strong> The retailer would need to maintain a systematic process to identify, locate and permanently remove a specific customer's data from all storage systems ‚Äî including their purchase history, clickstream logs, and personalisation model training data ‚Äî within 30 days of a valid request.</span>
          &nbsp;
          <span class="ma-i">[I] <strong>Impact:</strong> This requires the organisation to invest in data mapping infrastructure and compliance staff, increasing operational costs, and failure to comply within the legal timeframe risks fines of up to 4% of global annual turnover under GDPR enforcement ‚Äî a direct and quantifiable financial risk.</span>
        </div>
        <div class="ma-legend">
          <div class="legend-item"><div class="legend-dot" style="background:rgba(255,59,59,0.5);"></div><span style="color:#ff8888;">[N] Name</span></div>
          <div class="legend-item"><div class="legend-dot" style="background:rgba(255,149,0,0.5);"></div><span style="color:#ffcc88;">[E] Explain</span></div>
          <div class="legend-item"><div class="legend-dot" style="background:rgba(57,255,20,0.4);"></div><span style="color:#aaff88;">[I] Impact</span></div>
        </div>
      </div>
      <div class="glass student-answer-area">
        <div class="sa-title">// YOUR ANSWER // SELECT TEXT TO HIGHLIGHT</div>
        <div id="student-display"></div>
      </div>
      <div class="glass" id="axiom-deconstruction" style="padding:20px;">
        <div class="axd-header">
          <div><div class="axd-title">AXIOM-7 // NEI DECONSTRUCTION</div><div class="axd-sub">// AI-ASSISTED ANALYSIS ‚Äî COMPARE WITH YOUR OWN TAGGING ABOVE</div></div>
        </div>
        <div id="axd-content"><div class="axd-loading"><div class="axd-spinner"></div>SCANNING RESPONSE...</div></div>
      </div>
      <div class="vulnerability-alert" id="vuln-alert">
        <div class="vuln-header"><div class="vuln-icon">‚ö†</div>AXIOM-7 // TECHNIQUE GAP DETECTED</div>
        <div class="vuln-msg">
          <strong>You've described the GDPR right ‚Äî but the examiner needs the business consequence.</strong><br><br>
          What does it actually cost the business to comply? Think: data infrastructure investment, compliance staff, legal exposure if they fail (up to 4% of global turnover). That measurable outcome is your Impact sentence.<br><br>
          No [I] tag = no third mark confirmed.
        </div>
      </div>
      <div class="success-alert" id="success-alert">
        <div class="success-header">‚úì CALIBRATION COMPLETE ‚Äî 3/3 TECHNIQUE CONFIRMED</div>
        <div style="font-family:'Share Tech Mono',monospace;font-size:13px;color:var(--text-dim);line-height:1.7;">Full N.E.I. structure detected. You've named the GDPR principle, explained how it applies to this data, and stated a measurable business impact. That's a 3-mark answer.</div>
        <div class="nei-tally">
          <div class="tally-chip tally-n">‚úì [N] Named</div>
          <div class="tally-chip tally-e">‚úì [E] Explained</div>
          <div class="tally-chip tally-i">‚úì [I] Impact</div>
        </div>
      </div>
      <div style="display:flex;gap:16px;justify-content:center;flex-wrap:wrap;">
        <button class="btn-primary" id="complete-btn" onclick="goScene(5)" style="display:none;"><span>‚úì COMPLETE MISSION</span></button>
        <button class="btn-ghost" onclick="runCalibration()">‚ñ∂ RUN CALIBRATION</button>
      </div>
    </div>
    <div class="glass highlight-toolbar">
      <div class="toolbar-title">HIGHLIGHT TOOL</div>
      <button class="hl-btn hl-n" id="btn-n" onclick="setMode('n')"><span style="font-size:18px;">üî¥</span> [N] NAME</button>
      <button class="hl-btn hl-e" id="btn-e" onclick="setMode('e')"><span style="font-size:18px;">üü†</span> [E] EXPLAIN</button>
      <button class="hl-btn hl-i" id="btn-i" onclick="setMode('i')"><span style="font-size:18px;">üü¢</span> [I] IMPACT</button>
      <div class="hl-instructions">1. Select a mode above<br>2. Click and drag to highlight<br>3. Tag each N.E.I. component<br>4. Click RUN CALIBRATION</div>
      <div style="margin-top:16px;padding-top:16px;border-top:1px solid var(--panel-border);">
        <div style="font-family:'Share Tech Mono',monospace;font-size:10px;color:var(--text-dim);margin-bottom:8px;">6.4 IMPACT CHECKLIST</div>
        <div style="font-family:'Share Tech Mono',monospace;font-size:11px;color:var(--text-dim);line-height:1.8;">‚ñ∏ Fine up to 4% turnover<br>‚ñ∏ Infrastructure cost<br>‚ñ∏ Compliance staff<br>‚ñ∏ Reputational damage<br>‚ñ∏ Operational constraint</div>
      </div>
    </div>
  </div>
</section>

<!-- SCENE 5: SUCCESS + CA6 COMPLETION -->
<section class="scene" id="scene-5">
  <div class="success-scene">
    <div class="badge-3d" onclick="exportReport()">
      <div class="badge-inner">
        <div class="badge-icon">‚öñÔ∏è</div>
        <div class="badge-rank">MODULE 6.4</div>
        <div class="badge-name">COMPLIANCE OFFICER</div>
      </div>
    </div>
    <div class="glass success-card">
      <div class="success-headline">MODULE COMPLETE</div>
      <div class="success-sub">Big Data, Warehousing & GDPR mastered. You understand both the opportunity and the obligation.</div>
      <div class="share-card">"Big data creates value at scale. GDPR creates accountability at scale. The examiner's question is never just 'what is GDPR?' ‚Äî it's always 'what does it cost the business to comply, and what's the penalty for not doing so?'"</div>
      <button class="mission-report-btn" onclick="exportReport()">‚¨á EXPORT MISSION REPORT</button>
    </div>
    <div class="completion-banner">
      <div class="cb-title">üèÜ CONTENT AREA 6 ‚Äî COMPLETE</div>
      <div class="cb-sub">You have completed all six modules in Content Area 6: Data in Organisations.<br>Data, Information & Knowledge ‚Äî Why Organisations Need Data ‚Äî How Data is Generated ‚Äî Data Formats ‚Äî Data Systems ‚Äî Big Data & GDPR.<br><br>Your NEI technique is confirmed across the full content area. Return to the Topic Index to continue.</div>
    </div>
    <div class="btn-row">
      <a href="../topics.html" style="text-decoration:none;"><button class="btn-primary"><span>‚ü∂ RETURN TO TOPIC INDEX</span></button></a>
      <a href="../dashboard.html" style="text-decoration:none;"><button class="btn-ghost">üìä VIEW DASHBOARD</button></a>
    </div>
  </div>
</section>

<!-- GLITCH -->
<div id="glitch-overlay" aria-hidden="true">
  <div class="glitch-scanlines"></div>
  <div class="glitch-block g1"></div><div class="glitch-block g2"></div><div class="glitch-block g3"></div>
  <div class="glitch-text">COMPLIANCE VERIFIED. TERMINAL UNLOCKING...</div>
  <div class="glitch-subtext">ACCESSING MISSION TERMINAL</div>
  <div class="glitch-coords">GDPR // BIG DATA // 6 Vs // DATA RIGHTS</div>
</div>
<div id="lock-nudge">‚ö° COMPLETE THE KNOWLEDGE CHECK FIRST</div>
<div class="nav-tabs" id="floating-nav">
  <button class="nav-tab-btn active" onclick="goScene(1)" id="navbtn-1">01 BRIEF</button>
  <button class="nav-tab-btn" onclick="goScene(2)" id="navbtn-2">02 LESSON</button>
  <button class="nav-tab-btn locked" id="navbtn-3" disabled>üîí 03 MISSION</button>
  <button class="nav-tab-btn locked" id="navbtn-4" disabled>üîí 04 CALIBRATE</button>
  <button class="nav-tab-btn locked" id="navbtn-5" disabled>üîí 05 BADGE</button>
</div>
<div id="reboot-overlay">
  <div class="rb-line1" id="rb-line1">COMPLIANCE INSIGHT CONFIRMED</div>
  <div class="rb-line2" id="rb-line2">CALIBRATING SPECIALIST GRADE</div>
  <div class="rb-bar-wrap"><div class="rb-bar" id="rb-bar"></div></div>
</div>

<script>
/* ‚îÄ‚îÄ MCQ DATA ‚îÄ‚îÄ */
const QUESTIONS = [
  {
    scenario: 'A retailer collects 4 petabytes of customer clickstream data daily from its global e-commerce platform.',
    q: 'Which of the "Six Vs" of big data best describes the sheer amount of data being collected?',
    opts: ['Velocity','Volume','Veracity','Variability'],
    correct: 1,
    feedback: '‚úì CORRECT ‚Äî Volume refers to the massive scale of data generated. 4 petabytes daily is a Volume challenge. Velocity would describe the speed at which data arrives (real-time), not the total amount.'
  },
  {
    scenario: 'The retailer must ensure customers can access, correct, or delete their personal data on request.',
    q: 'Which GDPR principle directly requires organisations to delete personal data when it is no longer needed?',
    opts: ['Right to Rectification','Data Minimisation','Storage Limitation','Right of Access'],
    correct: 2,
    feedback: '‚úì CORRECT ‚Äî Storage Limitation requires personal data not be kept longer than necessary. Storage Limitation and Right to Erasure are the two GDPR principles most commonly confused ‚Äî Right to Erasure is triggered by the individual; Storage Limitation is an organisational obligation.'
  },
  {
    scenario: 'The retailer stores all historical transaction and behavioural data in a single centralised repository for analysis.',
    q: 'What is the primary business advantage of using a data warehouse over separate transactional databases?',
    opts: [
      'It processes live orders faster',
      'It enables cross-dataset analysis and strategic reporting across the whole organisation',
      'It reduces the volume of data collected',
      'It automatically anonymises customer data under GDPR'
    ],
    correct: 1,
    feedback: '‚úì CORRECT ‚Äî A data warehouse consolidates data from multiple sources for analytical queries. Unlike operational databases (optimised for live transactions), warehouses are designed for complex queries across historical datasets ‚Äî enabling strategic insight and business intelligence.'
  },
  {
    scenario: 'GDPR non-compliance can result in financial penalties for organisations that mishandle personal data.',
    q: 'What is the maximum fine for a serious GDPR breach under Article 83(5)?',
    opts: ['¬£500,000','‚Ç¨10 million or 2% of global turnover (whichever is higher)','‚Ç¨20 million or 4% of global annual turnover (whichever is higher)','‚Ç¨5 million or 1% of global turnover'],
    correct: 2,
    feedback: '‚úì CORRECT ‚Äî Article 83(5) covers the most serious infringements (e.g. core data protection principles, rights of data subjects). Maximum fine: ‚Ç¨20 million or 4% of global annual turnover. Article 83(4) covers less severe breaches with a lower maximum of ‚Ç¨10m / 2%.'
  }
];

let qIndex = 0, score = 0, mcqComplete = false;

function renderQuestion() {
  const q = QUESTIONS[qIndex];
  document.getElementById('mcq-score').textContent = `QUESTION ${qIndex+1} OF ${QUESTIONS.length}`;
  document.getElementById('mcq-next-btn').style.display = 'none';
  document.getElementById('mcq-card').innerHTML = `
    <div class="mcq-scenario">SCENARIO: ${q.scenario}</div>
    <div class="mcq-question">${q.q}</div>
    <div class="mcq-options">
      ${q.opts.map((opt,i) => `<button class="mcq-opt" onclick="selectAnswer(${i})" id="opt-${i}">
        <div class="opt-letter">${String.fromCharCode(65+i)}</div>
        <span>${opt}</span>
      </button>`).join('')}
    </div>
    <div class="mcq-feedback" id="mcq-feedback"></div>`;
}

function selectAnswer(idx) {
  const q = QUESTIONS[qIndex];
  document.querySelectorAll('.mcq-opt').forEach(b => b.classList.add('disabled'));
  document.querySelectorAll('.mcq-opt').forEach(b => b.onclick = null);
  const fb = document.getElementById('mcq-feedback');
  document.getElementById('opt-'+idx).classList.add(idx === q.correct ? 'correct' : 'incorrect');
  if (idx !== q.correct) document.getElementById('opt-'+q.correct).classList.add('correct');
  if (idx === q.correct) score++;
  fb.className = 'mcq-feedback show ' + (idx === q.correct ? 'correct' : 'incorrect');
  fb.textContent = idx === q.correct ? q.feedback : `‚úó INCORRECT ‚Äî ${q.feedback}`;
  const nextBtn = document.getElementById('mcq-next-btn');
  nextBtn.style.display = 'inline-flex';
  if (qIndex === QUESTIONS.length - 1) {
    nextBtn.querySelector('span').textContent = score >= 3 ? '‚Üí MISSION TERMINAL' : '‚Üí SEE RESULTS';
  }
}

function nextQuestion() {
  qIndex++;
  if (qIndex < QUESTIONS.length) {
    renderQuestion();
  } else {
    mcqComplete = true;
    const passed = score >= 3;
    document.getElementById('mcq-score').textContent = `RESULT: ${score}/${QUESTIONS.length} CORRECT`;
    document.getElementById('mcq-card').innerHTML = `
      <div style="text-align:center;padding:12px 0;">
        <div style="font-family:'Orbitron',monospace;font-size:clamp(28px,5vw,48px);font-weight:900;color:${passed?'var(--green)':'var(--amber)'};margin-bottom:12px;">${score}/${QUESTIONS.length}</div>
        <div style="font-family:'Share Tech Mono',monospace;font-size:14px;color:${passed?'var(--green)':'var(--amber)'};letter-spacing:3px;margin-bottom:20px;">${passed?'‚úì KNOWLEDGE CHECK PASSED':'REVIEW AND RETRY'}</div>
        <div style="font-family:'Rajdhani',sans-serif;font-size:15px;color:var(--text-dim);line-height:1.7;max-width:560px;margin:0 auto;">${passed?'Strong compliance awareness confirmed. GDPR rights, Big Data characteristics, and the financial exposure of non-compliance are all live exam topics. Mission Terminal is now unlocked.':'You need 3/4 to proceed. Review the feedback for each question ‚Äî the examiner distinction between Storage Limitation and Right to Erasure is commonly tested.'}</div>
        ${passed?'':'<button class="btn-ghost" onclick="retryMCQ()" style="margin-top:20px;">‚Ü∫ RETRY QUESTIONS</button>'}
      </div>`;
    if (passed) {
      document.getElementById('mcq-next-btn').querySelector('span').textContent = '‚Üí MISSION TERMINAL';
      document.getElementById('mcq-next-btn').setAttribute('onclick','glitchToMission()');
    } else {
      document.getElementById('mcq-next-btn').style.display = 'none';
    }
  }
}

function retryMCQ() {
  qIndex = 0; score = 0; mcqComplete = false; renderQuestion();
}

/* ‚îÄ‚îÄ GATEKEEPER ‚îÄ‚îÄ */
let sorterComplete=false,nudgeTimer=null,glitchTriggerTimer=null,glitchNavTimer=null,glitchCleanTimer=null;
document.addEventListener('DOMContentLoaded', renderQuestion);
document.getElementById('floating-nav').addEventListener('mousedown',e=>{
  const btn=e.target.closest('.nav-tab-btn.locked');if(!btn)return;
  btn.classList.remove('rejecting');void btn.offsetWidth;btn.classList.add('rejecting');
  btn.addEventListener('animationend',()=>btn.classList.remove('rejecting'),{once:true});
  const nudge=document.getElementById('lock-nudge');nudge.classList.add('show');clearTimeout(nudgeTimer);
  nudgeTimer=setTimeout(()=>nudge.classList.remove('show'),2200);
});
function unlockTabs(){
  if(sorterComplete)return;sorterComplete=true;
  [{id:'navbtn-3',label:'03 MISSION',scene:3},{id:'navbtn-5',label:'05 BADGE',scene:5}].forEach(({id,label,scene})=>{
    const btn=document.getElementById(id);btn.classList.remove('locked');btn.disabled=false;
    btn.textContent=label;btn.setAttribute('onclick',`goScene(${scene})`);
  });
}
function glitchToMission(){
  const overlay=document.getElementById('glitch-overlay');
  unlockTabs();overlay.classList.remove('active');void overlay.offsetWidth;overlay.classList.add('active');
  glitchNavTimer=setTimeout(()=>{glitchNavTimer=null;goScene(3);},950);
  glitchCleanTimer=setTimeout(()=>{glitchCleanTimer=null;overlay.classList.remove('active');},2000);
}

let currentScene=1;
function goScene(n){
  if(glitchTriggerTimer){clearTimeout(glitchTriggerTimer);glitchTriggerTimer=null;}
  if(glitchNavTimer){clearTimeout(glitchNavTimer);glitchNavTimer=null;}
  if(glitchCleanTimer){clearTimeout(glitchCleanTimer);glitchCleanTimer=null;}
  document.getElementById('glitch-overlay').classList.remove('active');
  document.querySelectorAll('.scene').forEach(s=>s.classList.remove('active'));
  document.getElementById('scene-'+n).classList.add('active');
  document.querySelectorAll('.step-dot').forEach((d,i)=>{
    d.classList.remove('active','done');
    if(i+1<n&&n<=5)d.classList.add('done');else if(i+1===n)d.classList.add('active');
  });
  [1,2,3,4,5].forEach(i=>{const b=document.getElementById('navbtn-'+i);if(b)b.classList.remove('active');});
  const ab=document.getElementById('navbtn-'+n);if(ab&&!ab.classList.contains('locked'))ab.classList.add('active');
  document.getElementById('floating-nav').style.display='flex';
  currentScene=n;window.scrollTo(0,0);
  if(n===3){
    clearInterval(window._textPoll);
    window._textPoll=setInterval(()=>{const ta=document.getElementById('student-answer');if(!ta)return;const v=ta.value;if(v!==(window._lastPolledValue||'')){window._lastPolledValue=v;updateHUD(v);updateWordCount(v);}},400);
  }else{clearInterval(window._textPoll);}
  if(n===4)prepCalibration();
}

/* ‚îÄ‚îÄ HUD ‚îÄ‚îÄ */
const N_WORDS=['gdpr','general data protection','right to erasure','right to be forgotten','right of access','right to rectification','right to portability','data minimisation','storage limitation','lawful basis','legitimate interest','consent','accountability','data protection officer','dpo','transparency','article'];
const E_WORDS=['personal data','behavioural data','clickstream','delete','deletion','erase','erasure','30 days','access request','data subject','process','processing','stored','retention','comply','compliance','request','obligation','must','required','notif','breach','mapping','locate','remove','anonymis','pseudonymis'];
const I_WORDS=['fine','penalty','penalt','turnover','4%','‚Ç¨20','million','cost','risk','legal','liability','reputat','operational','invest','infrastructure','staff','resource','constrain','restrict','compet','trust','custome','confiden','revenue','loss','expens','regulator'];
function hasKeyword(t,w){const s=t.toLowerCase();return w.some(k=>s.includes(k));}
function countWords(t){return t.trim()===''?0:t.trim().split(/\s+/).length;}
const IDLE_DELAY=10000;
const IDLE_PROMPT='You\'ve described the GDPR right. But what does it actually cost the business?\nThink: compliance infrastructure, staff overhead, legal fines for failure (up to 4% of global turnover). That\'s your Impact.';
let idleTimer=null;
function updateWordCount(text){
  const count=countWords(text);const el=document.getElementById('word-count-display');const fill=document.getElementById('energy-bar-fill');if(!el||!fill)return;
  const pct=Math.min(100,Math.round((count/60)*100));fill.style.width=pct+'%';fill.classList.remove('eb-red','eb-amber','eb-green');
  if(count===0){el.textContent='0 words ‚Äî aim for 60+';el.style.color='';}
  else if(count<40){fill.classList.add('eb-red');el.textContent=count+' words ‚Äî keep going';el.style.color='var(--red)';}
  else if(count<60){fill.classList.add('eb-amber');el.textContent=count+' words ‚Äî almost there';el.style.color='var(--amber)';}
  else{fill.classList.add('eb-green');el.textContent=count+' words ‚úì';el.style.color='var(--green)';}
  if(hasKeyword(text,I_WORDS)&&count>=60)triggerHUDGlitch();
  const hudI=document.getElementById('hud-i');if(hudI){if(count>=50&&!hudI.classList.contains('active-i'))hudI.style.animation='impact-pulse 1.8s ease infinite';else hudI.style.animation='';}
}
function resetIdleTimer(text){
  clearTimeout(idleTimer);if(countWords(text)>=60)return;
  idleTimer=setTimeout(()=>{const fb=document.getElementById('axiom-feedback');if(!fb||fb.style.display!=='none')return;fb.style.display='block';fb.style.borderColor='rgba(57,255,20,0.4)';fb.style.background='rgba(57,255,20,0.05)';fb.style.color='var(--green)';fb.textContent='AXIOM-7 // '+IDLE_PROMPT;},IDLE_DELAY);
}
function triggerHUDGlitch(){const hudI=document.getElementById('hud-i');if(hudI.dataset.glitched)return;hudI.dataset.glitched='1';hudI.style.animation='hud-glitch 0.5s ease';setTimeout(()=>{hudI.style.animation='';delete hudI.dataset.glitched;},600);}
function updateHUD(text){
  const nA=hasKeyword(text,N_WORDS);const eA=hasKeyword(text,E_WORDS);const iA=hasKeyword(text,I_WORDS);
  document.getElementById('hud-n').className='nei-hud-item hud-n'+(nA?' active-n':'');
  document.getElementById('hud-e').className='nei-hud-item hud-e'+(eA?' active-e':'');
  document.getElementById('hud-i').className='nei-hud-item hud-i'+(iA?' active-i':'');
  if(nA&&eA&&iA)window._msmAllHUDActive=true;
  const wc=countWords(text);if(nA&&eA&&iA&&wc>=60&&wc<=70)window._msmPrecisionWriter=true;
}

let submitAttempts=0;
const TIER1_MSG=`‚ö† AXIOM-7 // INSUFFICIENT SIGNAL DETECTED\n\nYour response needs more depth. The examiner needs three things: name the specific GDPR right or principle, explain how it applies to this customer data scenario, and state the business consequence of complying (or failing to).\n\nAim for at least 60 words.`;
const TIER2_TEMPLATE=`Try this structure:\n\n[N] Under GDPR, the [NAME THE RIGHT ‚Äî Right to Erasure / Storage Limitation / etc.]...\n[E] This means the business must [EXPLAIN THE OBLIGATION ‚Äî delete, provide access, limit retention]...\n[I] Failure to comply risks [STATE THE CONSEQUENCE ‚Äî fine up to 4% of global turnover, reputational damage, operational cost]...`;
function submitAnswer(){
  const answer=document.getElementById('student-answer').value.trim();if(!answer){alert('Please write your answer before submitting.');return;}
  const words=countWords(answer);const fb=document.getElementById('axiom-feedback');submitAttempts++;
  if(words<60){
    fb.style.display='block';
    if(submitAttempts===1){fb.style.borderColor='var(--amber)';fb.style.background='rgba(255,149,0,0.06)';fb.style.color='var(--amber)';fb.style.whiteSpace='pre-line';fb.textContent=TIER1_MSG;}
    else{fb.style.borderColor='var(--red)';fb.style.background='rgba(255,59,59,0.06)';fb.style.color='var(--text-primary)';fb.style.whiteSpace='pre-line';fb.textContent=TIER2_TEMPLATE;document.getElementById('student-answer').placeholder='[N] Under GDPR, the Right to Erasure...\n[E] This requires the business to delete all customer data within...\n[I] Failure to comply risks a fine of up to...';}
    const btn=document.querySelector('#scene-3 .btn-primary');if(btn){btn.style.animation='tab-reject 0.4s ease';setTimeout(()=>{btn.style.animation='';},450);}return;
  }
  fb.style.display='none';
  const btn4=document.getElementById('navbtn-4');btn4.classList.remove('locked');btn4.disabled=false;btn4.textContent='04 CALIBRATE';btn4.setAttribute('onclick','goScene(4)');
  triggerReboot();
}
function triggerReboot(){
  const overlay=document.getElementById('reboot-overlay');const line1=document.getElementById('rb-line1');const line2=document.getElementById('rb-line2');const bar=document.getElementById('rb-bar');
  overlay.style.display='flex';
  setTimeout(()=>{line1.style.opacity='1';},200);setTimeout(()=>{line2.style.opacity='1';},700);
  setTimeout(()=>{bar.style.transition='width 1.2s ease-out';bar.style.width='100%';},1000);
  setTimeout(()=>{overlay.style.display='none';line1.style.opacity='0';line2.style.opacity='0';bar.style.transition='none';bar.style.width='0%';goScene(4);},2400);
  const answer=document.getElementById('student-answer').value.trim();
  window._neiApiPromise=analyzeWithNEIChecker(answer,'Focus on GDPR rights and principles (Right to Erasure, Storage Limitation, Data Minimisation, Right to Access), how they apply to customer behavioural data in e-commerce, and measurable business impacts such as compliance costs, fines up to 4% of global turnover, infrastructure investment, and operational constraints');
}
async function analyzeWithNEIChecker(studentText,customPrompt=''){
  const r=await fetch('https://neichecker.toolsforteaching.co.uk/nei-checker.php',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({studentText,prompt:customPrompt})});
  if(!r.ok)throw new Error(`HTTP ${r.status}`);const d=await r.json();if(!d.success)throw new Error(d.error||'Analysis failed');return d;
}
function renderAxiomDeconstruction(result){
  const content=document.getElementById('axd-content');document.getElementById('axiom-deconstruction').style.display='block';
  const{hasName,hasExplain,hasImpact}=result.analysis;
  let html=result.highlightedHtml||result.originalText||'';
  html=html.replace(/style=['"][^'"]*color\s*:\s*#ff6b6b[^'"]*['"]/gi,'class="nei-n"');
  html=html.replace(/style=['"][^'"]*color\s*:\s*#ffa500[^'"]*['"]/gi,'class="nei-e"');
  html=html.replace(/style=['"][^'"]*color\s*:\s*#51cf66[^'"]*['"]/gi,'class="nei-i"');
  content.innerHTML=`<div class="axd-badges"><div class="axd-badge ${hasName?'hit':'miss'}">[N] NAME</div><div class="axd-badge ${hasExplain?'hit':'miss'}">[E] EXPLAIN</div><div class="axd-badge ${hasImpact?'hit':'miss'}">[I] IMPACT</div></div>${!hasImpact?`<div style="font-family:'Share Tech Mono',monospace;font-size:11px;color:var(--red);letter-spacing:1px;margin-bottom:12px;padding:10px 12px;border:1px solid rgba(255,59,59,0.25);border-radius:6px;background:rgba(255,59,59,0.05);">‚ö† AXIOM-7 // NO IMPACT COMPONENT DETECTED ‚Äî THIRD MARK AT RISK</div>`:''}<div class="axd-text-wrap">${html}</div><div class="axd-legend"><div class="axd-legend-item"><div class="axd-dot" style="background:rgba(255,59,59,0.5);"></div>[N] NAME</div><div class="axd-legend-item"><div class="axd-dot" style="background:rgba(255,149,0,0.5);"></div>[E] EXPLAIN</div><div class="axd-legend-item"><div class="axd-dot" style="background:rgba(57,255,20,0.4);"></div>[I] IMPACT</div></div>`;
}
let currentMode=null,taggedN=false,taggedE=false,taggedI=false;
function prepCalibration(){
  const answer=document.getElementById('student-answer').value.trim();
  document.getElementById('student-display').innerText=answer||'(No answer entered ‚Äî go back to Scene 3 to write your answer.)';
  document.getElementById('vuln-alert').classList.remove('show');document.getElementById('success-alert').classList.remove('show');document.getElementById('complete-btn').style.display='none';
  taggedN=false;taggedE=false;taggedI=false;currentMode=null;
  ['btn-n','btn-e','btn-i'].forEach(id=>document.getElementById(id).classList.remove('active'));
  const content=document.getElementById('axd-content');document.getElementById('axiom-deconstruction').style.display='block';
  content.innerHTML='<div class="axd-loading"><div class="axd-spinner"></div>SCANNING RESPONSE...</div>';
  if(window._neiApiPromise){window._neiApiPromise.then(renderAxiomDeconstruction).catch(()=>{content.innerHTML='<div class="axd-error">‚ö† AXIOM-7 OFFLINE ‚Äî Complete your self-tagging above.</div>';});}
  else if(answer){analyzeWithNEIChecker(answer,'Focus on GDPR rights (Right to Erasure, Storage Limitation, Data Minimisation, Right to Access), application to customer behavioural data, and measurable business impacts such as fines up to 4% global turnover, compliance costs, and operational constraints').then(renderAxiomDeconstruction).catch(()=>{content.innerHTML='<div class="axd-error">‚ö† AXIOM-7 OFFLINE ‚Äî Complete your self-tagging above.</div>';});}
  else{document.getElementById('axiom-deconstruction').style.display='none';}
}
function setMode(m){currentMode=m;['btn-n','btn-e','btn-i'].forEach(id=>document.getElementById(id).classList.remove('active'));document.getElementById('btn-'+m).classList.add('active');}
document.addEventListener('mouseup',()=>{
  if(!currentMode)return;const sel=window.getSelection();if(!sel||sel.isCollapsed)return;
  const display=document.getElementById('student-display');if(!display||!display.contains(sel.anchorNode))return;
  try{const range=sel.getRangeAt(0);const span=document.createElement('span');span.className='hl-'+currentMode+'-tag';range.surroundContents(span);if(currentMode==='n')taggedN=true;if(currentMode==='e')taggedE=true;if(currentMode==='i')taggedI=true;}catch(err){}
  sel.removeAllRanges();
});
function runCalibration(){
  const vuln=document.getElementById('vuln-alert');const succ=document.getElementById('success-alert');const btn=document.getElementById('complete-btn');
  vuln.classList.remove('show');succ.classList.remove('show');btn.style.display='none';
  if(!taggedI){vuln.classList.add('show');vuln.scrollIntoView({behavior:'smooth',block:'center'});window._msmVulnTriggered=true;}
  else{succ.classList.add('show');btn.style.display='inline-flex';succ.scrollIntoView({behavior:'smooth',block:'center'});msmCheckBadges_64();}
}

/* ‚îÄ‚îÄ BADGE SYSTEM ‚îÄ‚îÄ */
const MSM_LS='msm_badges';
function msmEarnBadge(key){try{const b=JSON.parse(localStorage.getItem(MSM_LS))||{};if(b[key])return false;b[key]={earned:true,ts:Date.now()};localStorage.setItem(MSM_LS,JSON.stringify(b));return true;}catch(e){return false;}}
function msmCheckBadges_64(){
  msmEarnBadge('compliance_officer');
  const fb=document.getElementById('axiom-feedback');if(!fb||fb.style.display==='none'||fb.style.display==='')msmEarnBadge('first_strike');
  if(window._msmVulnTriggered){msmEarnBadge('signal_recovered');window._msmVulnTriggered=false;}
  if(window._msmAllHUDActive)msmEarnBadge('impact_specialist');
  if(submitAttempts>=3)msmEarnBadge('resilient_analyst');
  if(window._msmPrecisionWriter)msmEarnBadge('precision_writer');
  try{
    const b=JSON.parse(localStorage.getItem(MSM_LS))||{};
    const ca6Done=['raw_signal','market_intelligence','signal_mapper','data_architect','systems_analyst','compliance_officer'].every(k=>b[k]);
    if(ca6Done){msmEarnBadge('full_clearance');showCA6CompletionToast();}
  }catch(e){}
}
function showCA6CompletionToast(){
  const t=document.createElement('div');
  t.style.cssText='position:fixed;bottom:80px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,rgba(255,215,0,0.15),rgba(57,255,20,0.1));border:1px solid rgba(255,215,0,0.5);border-radius:10px;padding:16px 24px;font-family:Orbitron,monospace;font-size:12px;color:#FFD700;letter-spacing:2px;z-index:9000;animation:fade-in 0.4s ease both;text-align:center;';
  t.textContent='üèÜ FULL CLEARANCE BADGE UNLOCKED ‚Äî CONTENT AREA 6 COMPLETE';
  document.body.appendChild(t);setTimeout(()=>t.remove(),5000);
}

/* ‚îÄ‚îÄ EXPORT ‚îÄ‚îÄ */
function exportReport(){
  const answer=document.getElementById('student-answer').value||'(No answer recorded)';
  const html=`<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Mission Report ‚Äî 6.4 Big Data & GDPR</title><style>body{font-family:monospace;background:#0D1117;color:#E8EDF3;padding:40px;max-width:800px;margin:0 auto;}h1{color:#00D4B8;font-size:24px;margin-bottom:4px;}.tag{font-size:11px;letter-spacing:3px;color:#39FF14;margin-bottom:24px;display:block;}h2{color:#00D4B8;font-size:14px;letter-spacing:2px;margin:24px 0 12px;}p{line-height:1.8;font-size:14px;}.ma{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-radius:8px;padding:20px;margin:12px 0;}.n{color:#ffaaaa;}.e{color:#ffcc88;}.i{color:#aaff88;}.sa{background:rgba(0,212,184,0.04);border:1px solid rgba(0,212,184,0.2);border-radius:8px;padding:20px;margin:12px 0;}.chips{display:flex;gap:12px;margin-top:16px;flex-wrap:wrap;}.chip{padding:6px 14px;border-radius:20px;font-size:12px;border:1px solid;}.chip-n{border-color:#FF3B3B;color:#ff8888;}.chip-e{border-color:#FF9500;color:#ffcc88;}.chip-i{border-color:#39FF14;color:#aaff88;}</style></head><body>
  <h1>THE MARK SCHEME METHOD¬Æ</h1><span class="tag">MISSION REPORT // MODULE 6.4 // BIG DATA & GDPR</span>
  <h2>EXAM QUESTION</h2><p>A global retailer stores and analyses customer behavioural data collected from its e-commerce platform to personalise product recommendations. Explain one way the GDPR affects how this organisation manages this data. (3 Marks)</p>
  <h2>MODEL ANSWER ‚Äî 3 MARKS</h2><div class="ma">
  <p><span class="n">[N] The Right to Erasure under GDPR gives individuals the legal right to request that an organisation deletes all personal data held about them, including behavioural and transactional data.</span></p>
  <p><span class="e">[E] The retailer must maintain a systematic process to identify, locate and permanently remove a specific customer's data from all storage systems ‚Äî including purchase history, clickstream logs, and personalisation model training data ‚Äî within 30 days of a valid request.</span></p>
  <p><span class="i">[I] This requires investment in data mapping infrastructure and compliance staff, and failure to comply within the legal timeframe risks fines of up to 4% of global annual turnover under GDPR enforcement.</span></p>
  </div>
  <h2>YOUR ANSWER</h2><div class="sa"><p>${answer.replace(/</g,'&lt;').replace(/>/g,'&gt;')}</p></div>
  <h2>NEI PROFICIENCY SCAN</h2><div class="chips"><div class="chip chip-n">${taggedN?'‚úì':'‚úó'} [N] Name ${taggedN?'DETECTED':'NOT TAGGED'}</div><div class="chip chip-e">${taggedE?'‚úì':'‚úó'} [E] Explain ${taggedE?'DETECTED':'NOT TAGGED'}</div><div class="chip chip-i">${taggedI?'‚úì':'‚úó'} [I] Impact ${taggedI?'DETECTED':'NOT TAGGED'}</div></div>
  <h2>GDPR QUICK REFERENCE</h2><p>Max fine (Article 83(5)): ‚Ç¨20 million or 4% of global annual turnover (whichever is higher). Key rights: Erasure, Access, Rectification, Portability, Restriction of Processing, Object to Processing.</p>
  <p style="margin-top:32px;font-size:11px;color:rgba(232,237,243,0.3);">Generated by The Mark Scheme Method¬Æ ‚Äî Module 6.4</p></body></html>`;
  const blob=new Blob([html],{type:'text/html'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='mission-report-64-big-data-gdpr.html';a.click();
}
</script>
</body>
</html>
